# 北林计网课设2025

本项目模拟了一个基于 UDP 协议的可靠数据传输系统，包含客户端和服务器端。客户端和服务器通过自定义的协议头实现连接建立、数据传输、连接关闭等操作，同时模拟了丢包情况，以展示可靠传输机制的工作原理。

## 功能特点
- **自定义协议头**：使用自定义的协议头（包含类型、序列号、确认号、窗口大小和数据长度）来确保数据的可靠传输。
- **滑动窗口机制**：客户端采用滑动窗口机制来控制数据的发送，提高传输效率。
- **超时重传**：当数据包超时未收到确认时，客户端会进行重传，确保数据的完整性。
- **丢包模拟**：服务器端模拟一定的丢包率，以测试客户端的重传机制。
- **性能统计**：客户端会统计并输出传输过程中的关键性能指标，如丢包率、最大 RTT、最小 RTT、平均 RTT 和 RTT 标准差。

## 代码结构
### `udpclient.py`
- **客户端核心逻辑**：负责与服务器建立连接、发送数据、处理确认信息、重传超时数据包以及关闭连接。
- **性能统计**：记录并输出传输过程中的性能指标，如丢包率、RTT 等。

### `udpserver.py`
- **服务器核心逻辑**：处理客户端的连接请求、数据传输请求和关闭连接请求。
- **丢包模拟**：模拟一定的丢包率，以测试客户端的重传机制。

## 运行步骤

### 服务器端
1. 确保你已经安装了 Python 环境。
2. 打开终端，导航到项目目录。
3. 运行以下命令启动服务器：python udpserver.py4. 服务器将开始监听默认的 IP 地址（127.0.0.1）和端口（8080）。

### 客户端
1. 打开另一个终端，导航到项目目录。
2. 运行以下命令启动客户端：python udpclient.py3. 客户端会提示你输入服务器的 IP 地址和端口号。默认值（127.0.0.1 和 8080）。
4. 客户端将与服务器建立连接，开始传输数据，并在传输完成后输出性能统计信息。

## 配置参数
### `udpclient.py`
- `serverIP`：服务器的 IP 地址，默认为 127.0.0.1。
- `serverPort`：服务器的端口号，默认为 8080。
- `windowSize`：滑动窗口的大小，默认为 400。
- `minPacket` 和 `maxPacket`：每个数据包的最小和最大长度，默认为 40 和 80。
- `defaultRTT`：默认的超时时间（以毫秒为单位），默认为 100。
- `rawDataLength`：要传输的原始数据的长度，默认为 3000。
- `maxRetry`：每个数据包的最大重试次数，默认为 5。

### `udpserver.py`
- `serverIP`：服务器的 IP 地址，默认为 127.0.0.1。
- `serverPort`：服务器的端口号，默认为 8080。
- `dropRate`：服务器模拟的丢包率，默认为 0.5。

## 性能统计
客户端在传输完成后会输出以下性能统计信息：
- **应发送数据包数**：原始数据被分成的数据包数量。
- **实际发送数据包数**：包括重传在内的实际发送的数据包数量。
- **丢包率**：重传的数据包数量占实际发送数据包数量的百分比。
- **最大 RTT**：所有成功确认的数据包中最大的往返时间。
- **最小 RTT**：所有成功确认的数据包中最小的往返时间。
- **平均 RTT**：所有成功确认的数据包的平均往返时间。
- **RTT 标准差**：所有成功确认的数据包的往返时间的标准差。